// CHECK:
//   Mangled name: #f(0:0){0ยง<kotlin.CharSequence?&kotlin.Comparable<0:0>?>}kotlin.Int?
//   Public signature: /f|-5500886294888424567[0]
fun <T> f(x: T): Int? where T : CharSequence?, T : Comparable<T>? {
  return { // BLOCK
    val tmp0_safe_receiver: T = x
    when {
      EQEQ(arg0 = tmp0_safe_receiver, arg1 = null) -> null
      else -> tmp0_safe_receiver.compareTo(other = x)
    }
  }
}

// CHECK:
//   Mangled name: #test(){}
//   Public signature: /test|6620506149988718649[0]
fun test() {
  f<@FlexibleNullability String?>(x = s()) /*~> Unit */
  f<@FlexibleNullability String?>(x = #STRING) /*~> Unit */
}

