// CHECK:
//   Mangled name: #plusAssign@kotlin.Any(kotlin.Function0<kotlin.Unit>){}
//   Public signature: /plusAssign|7373131702739256667[0]
operator fun Any.plusAssign(lambda: Function0<Unit>) {
}

// CHECK JVM_IR:
//   Mangled name: #get@kotlin.Any(kotlin.Function0<kotlin.Unit>){}kotlin.Int
//   Public signature: /get|-8047211373454001717[0]
// CHECK JS_IR:
//   Mangled name computed from Ir:         #get@kotlin.Any(kotlin.Function0<kotlin.Unit>){}
//   Mangled name computed from Descriptor: #get@kotlin.Any(kotlin.Function0<kotlin.Unit>){}
//   Mangled name computed from Fir:        #get@kotlin.Any(kotlin.Function0<kotlin.Unit>){}kotlin.Int
//   Public signature: /get|-8047211373454001717[0]
operator fun Any.get(index: Function0<Unit>): Int {
  return 42
}

// CHECK:
//   Mangled name: #set@kotlin.Any(kotlin.Function0<kotlin.Unit>;kotlin.Int){}
//   Public signature: /set|-1483796712330329080[0]
operator fun Any.set(index: Function0<Unit>, value: Int) {
}

// CHECK:
//   Mangled name: #test1(kotlin.Any){}
//   Public signature: /test1|-4133164698161335314[0]
fun test1(a: Any) {
  a.plusAssign(lambda = 
    // CHECK:
    //   Mangled name computed from Ir:         #test1(kotlin.Any){}#<anonymous>#static(){}
    //   Mangled name computed from Descriptor: #test1(kotlin.Any){}#<anonymous>#static(){}
    //   Mangled name computed from Fir:        could not compute mangled name: java.lang.IllegalStateException: unexpected element fun <anonymous>(): R|kotlin/Unit| <inline=NoInline>  {... (truncated)
    local fun <anonymous>() {
      return Unit
    }
)
}

// CHECK:
//   Mangled name: #test2(kotlin.Any){}
//   Public signature: /test2|-8648451680149324146[0]
fun test2(a: Any) {
  { // BLOCK
    val <array>: Any = a
    val <index_0>: Function0<Unit> = 
      // CHECK:
      //   Mangled name computed from Ir:         #test2(kotlin.Any){}#<anonymous>#static(){}
      //   Mangled name computed from Descriptor: #test2(kotlin.Any){}#<anonymous>#static(){}
      //   Mangled name computed from Fir:        could not compute mangled name: java.lang.IllegalStateException: unexpected element fun <anonymous>(): R|kotlin/Unit| <inline=NoInline>  {... (truncated)
      local fun <anonymous>() {
        return Unit
      }

    <array>.set(index = <index_0>, value = <array>.get(index = <index_0>).plus(other = 42))
  }
}

// CHECK:
//   Mangled name: #test3(kotlin.Any){}
//   Public signature: /test3|165168275269731002[0]
fun test3(a: Any) {
  val <array>: Any = a
  val <index_0>: Function0<Unit> = 
    // CHECK:
    //   Mangled name computed from Ir:         #test3(kotlin.Any){}#<anonymous>#static(){}
    //   Mangled name computed from Descriptor: #test3(kotlin.Any){}#<anonymous>#static(){}
    //   Mangled name computed from Fir:        could not compute mangled name: java.lang.IllegalStateException: unexpected element fun <anonymous>(): R|kotlin/Unit| <inline=Unknown>  {... (truncated)
    local fun <anonymous>() {
      return Unit
    }

  val <unary>: Int = <array>.get(index = <index_0>)
  <array>.set(index = <index_0>, value = <unary>.inc())
  <unary> /*~> Unit */
}

