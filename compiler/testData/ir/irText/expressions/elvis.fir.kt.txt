// CHECK:
//   Mangled name: {}p
//   Public signature: /p|6715504260787941082[0]
val p: Any?
  field = null
  // CHECK JVM_IR:
  //   Mangled name: #<get-p>(){}kotlin.Any?
  //   Public signature: /p.<get-p>|-8403090778350003178[0]
  // CHECK JS_IR:
  //   Mangled name computed from Ir:         #<get-p>(){}
  //   Mangled name computed from Descriptor: #<get-p>(){}
  //   Mangled name computed from Fir:        #<get-p>(){}kotlin.Any?
  //   Public signature: /p.<get-p>|-8403090778350003178[0]
  get

// CHECK JVM_IR:
//   Mangled name: #foo(){}kotlin.Any?
//   Public signature: /foo|7186954136321860865[0]
// CHECK JS_IR:
//   Mangled name computed from Ir:         #foo(){}
//   Mangled name computed from Descriptor: #foo(){}
//   Mangled name computed from Fir:        #foo(){}kotlin.Any?
//   Public signature: /foo|7186954136321860865[0]
fun foo(): Any? {
  return null
}

// CHECK JVM_IR:
//   Mangled name: #test1(kotlin.Any?;kotlin.Any){}kotlin.Any
//   Public signature: /test1|8089037287083732315[0]
// CHECK JS_IR:
//   Mangled name computed from Ir:         #test1(kotlin.Any?;kotlin.Any){}
//   Mangled name computed from Descriptor: #test1(kotlin.Any?;kotlin.Any){}
//   Mangled name computed from Fir:        #test1(kotlin.Any?;kotlin.Any){}kotlin.Any
//   Public signature: /test1|8089037287083732315[0]
fun test1(a: Any?, b: Any): Any {
  return { // BLOCK
    val <elvis>: Any? = a
    when {
      EQEQ(arg0 = <elvis>, arg1 = null) -> b
      else -> <elvis>
    }
  }
}

// CHECK JVM_IR:
//   Mangled name: #test2(kotlin.String?;kotlin.Any){}kotlin.Any
//   Public signature: /test2|8978773976435569675[0]
// CHECK JS_IR:
//   Mangled name computed from Ir:         #test2(kotlin.String?;kotlin.Any){}
//   Mangled name computed from Descriptor: #test2(kotlin.String?;kotlin.Any){}
//   Mangled name computed from Fir:        #test2(kotlin.String?;kotlin.Any){}kotlin.Any
//   Public signature: /test2|8978773976435569675[0]
fun test2(a: String?, b: Any): Any {
  return { // BLOCK
    val <elvis>: String? = a
    when {
      EQEQ(arg0 = <elvis>, arg1 = null) -> b
      else -> <elvis>
    }
  }
}

// CHECK JVM_IR:
//   Mangled name: #test3(kotlin.Any?;kotlin.Any?){}kotlin.String
//   Public signature: /test3|-8038061391637261704[0]
// CHECK JS_IR:
//   Mangled name computed from Ir:         #test3(kotlin.Any?;kotlin.Any?){}
//   Mangled name computed from Descriptor: #test3(kotlin.Any?;kotlin.Any?){}
//   Mangled name computed from Fir:        #test3(kotlin.Any?;kotlin.Any?){}kotlin.String
//   Public signature: /test3|-8038061391637261704[0]
fun test3(a: Any?, b: Any?): String {
  when {
    b !is String -> return ""
  }
  when {
    a !is String? -> return ""
  }
  return { // BLOCK
    val <elvis>: String? = a /*as String? */
    when {
      EQEQ(arg0 = <elvis>, arg1 = null) -> b /*as String */
      else -> <elvis>
    }
  }
}

// CHECK JVM_IR:
//   Mangled name: #test4(kotlin.Any){}kotlin.Any
//   Public signature: /test4|6711648886037953081[0]
// CHECK JS_IR:
//   Mangled name computed from Ir:         #test4(kotlin.Any){}
//   Mangled name computed from Descriptor: #test4(kotlin.Any){}
//   Mangled name computed from Fir:        #test4(kotlin.Any){}kotlin.Any
//   Public signature: /test4|6711648886037953081[0]
fun test4(x: Any): Any {
  return { // BLOCK
    val <elvis>: Any? = <get-p>()
    when {
      EQEQ(arg0 = <elvis>, arg1 = null) -> x
      else -> <elvis>
    }
  }
}

// CHECK JVM_IR:
//   Mangled name: #test5(kotlin.Any){}kotlin.Any
//   Public signature: /test5|5392832943480599790[0]
// CHECK JS_IR:
//   Mangled name computed from Ir:         #test5(kotlin.Any){}
//   Mangled name computed from Descriptor: #test5(kotlin.Any){}
//   Mangled name computed from Fir:        #test5(kotlin.Any){}kotlin.Any
//   Public signature: /test5|5392832943480599790[0]
fun test5(x: Any): Any {
  return { // BLOCK
    val <elvis>: Any? = foo()
    when {
      EQEQ(arg0 = <elvis>, arg1 = null) -> x
      else -> <elvis>
    }
  }
}

