// CHECK:
//   Mangled name: Param
//   Public signature: /Param|null[0]
class Param {
  // CHECK:
  //   Mangled name: Param#<init>(){}
  //   Public signature: /Param.<init>|-5645683436151566731[0]
  constructor() /* primary */ {
    super/*Any*/()
    /* <init>() */

  }

}

// CHECK:
//   Mangled name: C
//   Public signature: /C|null[0]
class C {
  // CHECK:
  //   Mangled name: C#<init>(){}
  //   Public signature: /C.<init>|-5645683436151566731[0]
  constructor() /* primary */ {
    super/*Any*/()
    /* <init>() */

  }

  // CHECK:
  //   Mangled name: C{}c
  //   Public signature: /C.c|-4416962153448040627[0]
  val c: Int
    field = 42
    // CHECK:
    //   Mangled name: C#<get-c>(){}kotlin.Int
    //   Public signature: /C.c.<get-c>|-2440337234483931882[0]
    get

}

// CHECK:
//   Mangled name: R
//   Public signature: /R|null[0]
class R {
  // CHECK:
  //   Mangled name: R#<init>(){}
  //   Public signature: /R.<init>|-5645683436151566731[0]
  constructor() /* primary */ {
    super/*Any*/()
    /* <init>() */

  }

  // CHECK:
  //   Mangled name: R{}r
  //   Public signature: /R.r|-8117627916896159533[0]
  val r: Int
    field = 42
    // CHECK:
    //   Mangled name: R#<get-r>(){}kotlin.Int
    //   Public signature: /R.r.<get-r>|4210912234201800356[0]
    get

}

// CHECK:
//   Mangled name computed from Ir:         #f1@R(C;kotlin.Function3<C,R,Param,kotlin.Unit>){}
//   Mangled name computed from Descriptor: #f1!C@R(kotlin.Function3<C,R,Param,kotlin.Unit>){}
//   Public signature: /f1|-6159499595952586733[0]
fun R.f1($context_receiver_0: C, g: @ExtensionFunctionType @ContextFunctionTypeParams(count = 1) Function3<C, R, Param, Unit>) {
  g.invoke(p1 = $context_receiver_0, p2 = <this>, p3 = Param())
}

// CHECK:
//   Mangled name computed from Ir:         #f2(C;kotlin.Function2<C,Param,kotlin.Unit>){}
//   Mangled name computed from Descriptor: #f2!C(kotlin.Function2<C,Param,kotlin.Unit>){}
//   Public signature: /f2|916795325728250836[0]
fun f2($context_receiver_0: C, g: @ContextFunctionTypeParams(count = 1) Function2<C, Param, Unit>) {
  g.invoke(p1 = $context_receiver_0, p2 = Param())
}

// CHECK:
//   Mangled name computed from Ir:         #f3@R(C;kotlin.Function2<C,R,kotlin.Unit>){}
//   Mangled name computed from Descriptor: #f3!C@R(kotlin.Function2<C,R,kotlin.Unit>){}
//   Public signature: /f3|-4964362597990757320[0]
fun R.f3($context_receiver_0: C, g: @ExtensionFunctionType @ContextFunctionTypeParams(count = 1) Function2<C, R, Unit>) {
  g.invoke(p1 = $context_receiver_0, p2 = <this>)
}

// CHECK:
//   Mangled name computed from Ir:         #f4(C;kotlin.Function1<C,kotlin.Unit>){}
//   Mangled name computed from Descriptor: #f4!C(kotlin.Function1<C,kotlin.Unit>){}
//   Public signature: /f4|-1495265522536685659[0]
fun f4($context_receiver_0: C, g: @ContextFunctionTypeParams(count = 1) Function1<C, Unit>) {
  g.invoke(p1 = $context_receiver_0)
}

// CHECK:
//   Mangled name: #test(){}
//   Public signature: /test|6620506149988718649[0]
fun test() {
  val lf1: @ExtensionFunctionType @ContextFunctionTypeParams(count = 1) Function3<C, R, Param, Unit> = 
    // CHECK:
    //   Mangled name computed from Ir:         #test(){}#<anonymous>#static@R(C;Param){}
    //   Mangled name computed from Descriptor: #test(){}#<anonymous>#static!C@R(Param){}
    local fun R.<anonymous>($context_receiver_0: C, <anonymous parameter 0>: Param) {
      $this$null.<get-r>() /*~> Unit */
      $context_receiver_0.<get-c>() /*~> Unit */
    }

  val lf2: @ContextFunctionTypeParams(count = 1) Function2<C, Param, Unit> = 
    // CHECK:
    //   Mangled name computed from Ir:         #test(){}#<anonymous>#static(C;Param){}
    //   Mangled name computed from Descriptor: #test(){}#<anonymous>#static!C(Param){}
    local fun <anonymous>($context_receiver_0: C, <anonymous parameter 0>: Param) {
      $context_receiver_0.<get-c>() /*~> Unit */
    }

  val lf3: @ExtensionFunctionType @ContextFunctionTypeParams(count = 1) Function2<C, R, Unit> = 
    // CHECK:
    //   Mangled name computed from Ir:         #test(){}#<anonymous>#static@R(C){}
    //   Mangled name computed from Descriptor: #test(){}#<anonymous>#static!C@R(){}
    local fun R.<anonymous>($context_receiver_0: C) {
      $this$null.<get-r>() /*~> Unit */
      $context_receiver_0.<get-c>() /*~> Unit */
    }

  val lf4: @ContextFunctionTypeParams(count = 1) Function1<C, Unit> = 
    // CHECK:
    //   Mangled name computed from Ir:         #test(){}#<anonymous>#static(C){}
    //   Mangled name computed from Descriptor: #test(){}#<anonymous>#static!C(){}
    local fun <anonymous>($context_receiver_0: C) {
      $context_receiver_0.<get-c>() /*~> Unit */
    }

  with<C, Unit>(receiver = C(), block = 
    // CHECK:
    //   Mangled name: #test(){}#<anonymous>#static@C(){}
    local fun C.<anonymous>() {
      with<R, Unit>(receiver = R(), block = 
        // CHECK:
        //   Mangled name: #test(){}#<anonymous>#static@C(){}#<anonymous>#static@R(){}
        local fun R.<anonymous>() {
          $this$with.f1($context_receiver_0 = $this$with, g = lf1)
          $this$with.f1($context_receiver_0 = $this$with, g = 
            // CHECK:
            //   Mangled name computed from Ir:         #test(){}#<anonymous>#static@C(){}#<anonymous>#static@R(){}#<anonymous>#static@R(C;Param){}
            //   Mangled name computed from Descriptor: #test(){}#<anonymous>#static@C(){}#<anonymous>#static@R(){}#<anonymous>#static!C@R(Param){}
            local fun R.<anonymous>($context_receiver_0: C, <anonymous parameter 0>: Param) {
              $this$f1.<get-r>() /*~> Unit */
              $this$with.<get-c>() /*~> Unit */
            }
)
          f2($context_receiver_0 = $this$with, g = lf2)
          f2($context_receiver_0 = $this$with, g = 
            // CHECK:
            //   Mangled name computed from Ir:         #test(){}#<anonymous>#static@C(){}#<anonymous>#static@R(){}#<anonymous>#static(C;Param){}
            //   Mangled name computed from Descriptor: #test(){}#<anonymous>#static@C(){}#<anonymous>#static@R(){}#<anonymous>#static!C(Param){}
            local fun <anonymous>($context_receiver_0: C, <anonymous parameter 0>: Param) {
              $this$with.<get-c>() /*~> Unit */
            }
)
          $this$with.f3($context_receiver_0 = $this$with, g = lf3)
          $this$with.f3($context_receiver_0 = $this$with, g = 
            // CHECK:
            //   Mangled name computed from Ir:         #test(){}#<anonymous>#static@C(){}#<anonymous>#static@R(){}#<anonymous>#static@R(C){}
            //   Mangled name computed from Descriptor: #test(){}#<anonymous>#static@C(){}#<anonymous>#static@R(){}#<anonymous>#static!C@R(){}
            local fun R.<anonymous>($context_receiver_0: C) {
              $this$f3.<get-r>() /*~> Unit */
              $this$with.<get-c>() /*~> Unit */
            }
)
          f4($context_receiver_0 = $this$with, g = lf4)
          f4($context_receiver_0 = $this$with, g = 
            // CHECK:
            //   Mangled name computed from Ir:         #test(){}#<anonymous>#static@C(){}#<anonymous>#static@R(){}#<anonymous>#static(C){}
            //   Mangled name computed from Descriptor: #test(){}#<anonymous>#static@C(){}#<anonymous>#static@R(){}#<anonymous>#static!C(){}
            local fun <anonymous>($context_receiver_0: C) {
              $this$with.<get-c>() /*~> Unit */
            }
)
        }
)
    }
)
}

